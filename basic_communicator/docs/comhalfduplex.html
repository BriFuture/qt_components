<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- comhalfduplex.cpp -->
  <title>ComHalfDuplex Class | Qt  5.7</title>
</head>
<body>
<link href="style/online.css"                 rel="stylesheet" type="text/css">                 <div class="content"> <div class="context"> <a href="index.html">Home</a> <li>ComHalfDuplex</li>
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">ComHalfDuplex Class</h1>
<!-- $$$ComHalfDuplex-brief -->
<p>半双工工作模式的串口 <a href="#details">More...</a></p>
<!-- @@@ComHalfDuplex -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="abstractcomm.html">AbstractComm</a></td></tr></table></div><ul>
<li><a href="comhalfduplex-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Q_INVOKABLE </td><td class="memItemRight bottomAlign"><b><a href="comhalfduplex.html#ComHalfDuplex">ComHalfDuplex</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="comhalfduplex.html#dtor.ComHalfDuplex">~ComHalfDuplex</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="comhalfduplex.html#blockTime">blockTime</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="comhalfduplex.html#setBlockTime">setBlockTime</a></b>(int <i>blockTime</i>)</td></tr>
</table></div>
<ul>
<li class="fn">4 public functions inherited from <a href="abstractcomm.html#public-functions">AbstractComm</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 property inherited from <a href="abstractcomm.html#properties">AbstractComm</a></li>
<li class="fn">5 public slots inherited from <a href="abstractcomm.html#public-slots">AbstractComm</a></li>
<li class="fn">5 signals inherited from <a href="abstractcomm.html#signals">AbstractComm</a></li>
<li class="fn">2 protected functions inherited from <a href="abstractcomm.html#protected-functions">AbstractComm</a></li>
<li class="fn">1 protected slot inherited from <a href="abstractcomm.html#protected-slots">AbstractComm</a></li>
</ul>
<a name="details"></a>
<!-- $$$ComHalfDuplex-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p><b class="redFont"><code>\author</code></b>BriFuture <b class="redFont"><code>\date</code></b> 2018.04.27</p>
<p>半双工工作模式的串口</p>
<p>解决上位机发送指令和下位机发送数据同时发生时产生冲突导致 乱码的问题，解决冲突的主要原理是使用 waitForReadyRead 方法 对串口进行阻塞式读取，超时后即认为当前串口未被下位机占用， 此时上位机可以发送指令。 （显然，用 readyRead 信号的异步方式也是可以完成相同的任务的， 只是当想清楚这点时，已经写好了这个类，并且重新构建了 UI-Protocol -Com 之间的结构，因此并未改动 <a href="comfullduplex.html">ComFullDuplex</a> 中的代码）</p>
<p>This class is made to solve the problem that occurs when master computer(PC) send instruction into serial port while slave computer send data into serial port and they conflict with each other. The problem is now solved by using the blocking api waitForReadyRead to read the serial port. If blocking api triggers timeout event, it will send the command waiting to be send into serial port. (Obviously it can be replaced with non-blocking api which is driven by readyRead signal, but before it occurs to me that the non-blocking idea can also be used to solve the data conflict problem, I have finished this class and re-implement the structure of UI-Protocol-Com, So I didn't change the code in <a href="comfullduplex.html">ComFullDuplex</a>)</p>
</div>
<!-- @@@ComHalfDuplex -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$ComHalfDuplex[overload1]$$$ComHalfDuplex -->
<h3 class="fn" id="ComHalfDuplex"><a name="ComHalfDuplex"></a><span class="type">Q_INVOKABLE</span> ComHalfDuplex::<span class="name">ComHalfDuplex</span>()</h3>
<p>Default constructs an instance of ComHalfDuplex.</p><!-- @@@ComHalfDuplex -->
<!-- $$$~ComHalfDuplex[overload1]$$$~ComHalfDuplex -->
<h3 class="fn" id="dtor.ComHalfDuplex"><a name="dtor.ComHalfDuplex"></a>ComHalfDuplex::<span class="name">~ComHalfDuplex</span>()</h3>
<p>Destroys the instance of ComHalfDuplex.</p><!-- @@@~ComHalfDuplex -->
<!-- $$$blockTime[overload1]$$$blockTime -->
<h3 class="fn" id="blockTime"><a name="blockTime"></a><span class="type">int</span> ComHalfDuplex::<span class="name">blockTime</span>() const</h3>
<p>返回阻塞的等待时间</p>
<p><b>See also </b><a href="comhalfduplex.html#setBlockTime">setBlockTime</a>().</p>
<!-- @@@blockTime -->
<!-- $$$setBlockTime[overload1]$$$setBlockTimeint -->
<h3 class="fn" id="setBlockTime"><a name="setBlockTime"></a><span class="type">void</span> ComHalfDuplex::<span class="name">setBlockTime</span>(<span class="type">int</span> <i>blockTime</i>)</h3>
<p>设置阻塞时的等待时间</p>
<p><b>See also </b><a href="comhalfduplex.html#blockTime">blockTime</a>().</p>
<!-- @@@setBlockTime -->
</div>
</div> </div></body>
</html>
